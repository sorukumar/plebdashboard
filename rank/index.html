
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sortable and Filterable Table</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/css/theme.default.min.css" rel="stylesheet">
    <style>
        #infoTable {
    width: 100%;
    border-collapse: collapse;
}

#infoTable th, #infoTable td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

#infoTable th {
    background-color: #f2f2f2;
}

input#filterInput {
    margin-bottom: 10px;
    width: 300px;
    padding: 8px;
}

    </style>
</head>
<body>
    <input type="text" id="filterInput" onkeyup="filterTable()" placeholder="Search for names...">
    <table id="infoTable" class="tablesorter">
        <thead>
            <tr>
                <th>Degree Centrality Rank</th>
                <th>Betweenness Centrality Rank</th>
                <th>Closeness Centrality Rank</th>
                <th>Eigenvector Centrality Rank</th>
                <th>Active Channel Count Rank</th>
                <th>Capacity Rank</th>
                <th>Alias</th>
                <th>Clearnet Tor Status</th>
                <th>Formatted Capacity</th>
                <th>Active Channel Count</th>
                <th>Public Key</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
    Papa.parse("https://raw.githubusercontent.com/sorukumar/plebdashboard/site/data/node_rank.csv", {
        download: true,
        header: true,
        complete: function(results) {
            const table = document.getElementById('infoTable').getElementsByTagName('tbody')[0];
            results.data.forEach(function(item) {
                let row = table.insertRow();
                Object.values(item).forEach(function(val) {
                    let cell = row.insertCell();
                    cell.textContent = val;
                });
            });
            $("#infoTable").tablesorter();
        }
    });
});

function filterTable() {
    let input = document.getElementById("filterInput");
    let filter = input.value.toUpperCase();
    let table = document.getElementById("infoTable");
    let tr = table.getElementsByTagName("tr");
    for (let i = 1; i < tr.length; i++) {
        let tds = tr[i].getElementsByTagName("td");
        let found = false;
        for (let j = 0; j < tds.length; j++) {
            if (tds[j].textContent.toUpperCase().indexOf(filter) > -1) {
                found = true;
                break;
            }
        }
        tr[i].style.display = found ? "" : "none";
    }
}

    </script>
</body>
</html>
